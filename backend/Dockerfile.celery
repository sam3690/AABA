FROM python:3.11-slim

WORKDIR /app

# Copy dependencies first
COPY pyproject.toml uv.lock ./

RUN pip install uv && uv sync --frozen

# Copy app code
COPY . .

# Start Celery worker
CMD ["uv","run","celery", "-A", "app.workers.job_tasks", "worker", "--loglevel=info"]
